# 西瓜學校

## 資料來源:
[內政部社會經濟資料服務平台](https://segis.moi.gov.tw/STATCloud/Index)
-   [資料目錄](https://segis.moi.gov.tw/STATCloud/Catalog)
-   [資料查詢下載](https://segis.moi.gov.tw/STATCloud/QueryInterface)

```SQL
-- 啟動資料庫
INSTALL spatial;
LOAD spatial;

-- 查詢支援的 GDAL 驅動程式和檔案格式的清單
SELECT  *T_Drivers();
```
# 讀入資料

```SQL
SELECT * FROM
READ_CSV('E:\research\授課\地理資訊\空間資料庫\Data\112學年國民中學校別概覽_全國(不含澎湖、金門、連江縣).csv',skip=1);
```

```SQL
CREATE TABLE 國中 AS
SELECT * FROM
READ_CSV('E:\research\授課\地理資訊\空間資料庫\Data\112學年國民中學校別概覽_全國(不含澎湖、金門、連江縣).csv',skip=1);
```

```SQL

ALTER TABLE 國中 ADD COLUMN location GEOMETRY;

UPDATE 國中
SET location = ST_POINT("X坐標", "Y坐標");
```

## 輸出空間資料
```

-- 輸出 GeoJSON
COPY 國中 TO 'E:\research\授課\地理資訊\空間資料庫\Data\國中.geojson'
WITH (FORMAT GDAL, DRIVER 'GeoJSON', SRS 'EPSG:3826' );

-- 輸出 Shapefile
-- dbf 欄位僅有10 Byte ，過長的屬性名稱將會被縮短
COPY 國中 TO 'E:\research\授課\地理資訊\空間資料庫\Data\國中.shp'
WITH (FORMAT GDAL, DRIVER 'ESRI Shapefile', SRS 'EPSG:3826', LAYER_CREATION_OPTIONS 'ENCODING=UTF-8' );
